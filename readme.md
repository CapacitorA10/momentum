# simulate_backtest.py

## 📖 소개
`simulate_backtest.py`는 **퀀트 투자 전략**을 구현하고 백테스팅을 수행하는 프로그램입니다. 
이 스크립트를 통해 투자 전략의 과거 성과를 검증하고, 포트폴리오의 성과를 시각화할 수 있습니다.

특히 **KOSPI200** 데이터를 활용해 최적화된 포트폴리오를 구성하며, 전략적 리밸런싱을 통해 장기적인 성과를 평가합니다.

---

## ⚙️ 주요 기능
1. **백테스팅 기능**  
   - 투자 시작일부터 종료일까지 전략에 따른 분기별 리밸런싱 수행.
   - 투자 비중을 기반으로 최적화된 포트폴리오 구성.
   - 포트폴리오 성과를 다양한 지표(CAGR, MDD, Sharpe Ratio 등)로 평가.

2. **시각화**  
   - 포트폴리오 가치 변화를 **라인 차트**로 시각화.
   - 분기별 종목별 비중 변화를 **Stacked Bar Chart**로 시각화.

3. **KOSPI200 벤치마크**  
   - 벤치마크 지수(KOSPI200)와의 성과 비교.

---

## 🛠️ 설치 및 실행 방법

### 1. **필수 패키지 설치**
```bash
pip install -r requirements.txt
```

### 2. **필수 파일 구성**
- config.json:API 키 저장 및 설정
```bash
{
    "KIS_API": {
        "appkey": "YOUR_APP_KEY",
        "appsecret": "YOUR_APP_SECRET",
        "CANO": "YOUR_ACCOUNT_NO",
        "ACNT_PRDT_CD": "YOUR_PRODUCT_CODE"
    }
}
```

### 3. **백테스팅 실행**
```bash
python simulate_backtest.py
```
### 🖥️ 프로그램 구조

파일 구조
```commandline
project/
│
├── simulate_backtest.py       # 주력 프로그램
├── data_import.py             # 데이터 수집 모듈
├── strategy_modules.py        # 투자 전략 관련 함수
├── config.json                # 설정 파일
└── README.md                  # 설명 파일
```

## 📊 결과물

### 1. 포트폴리오 성과 평가
- **CAGR (연평균 성장률)**: 포트폴리오의 연평균 수익률을 계산하여 성장률을 평가합니다.
- **MDD (최대 손실률)**: 투자 기간 중 자산의 최대 손실폭을 계산하여 위험성을 평가합니다.
- **Sharpe Ratio**: 포트폴리오의 수익 대비 변동성을 계산하여 효율성을 측정합니다.

### 2. 그래프 시각화
- **포트폴리오 가치 변화 (라인 차트)**  
  포트폴리오 가치가 시간에 따라 어떻게 변화했는지를 보여줍니다. 벤치마크인 KOSPI200 지수와 비교하여 성과를 확인할 수 있습니다.

- **분기별 종목 비중 변화 (Stacked Bar Chart)**  
  각 분기마다 투자한 종목별 비중을 막대 그래프 형식으로 보여줍니다. 이를 통해 특정 종목의 투자 비중 변화를 한눈에 파악할 수 있습니다.

#### 📘 예시
- **라인 차트**  
  포트폴리오 가치와 KOSPI200 지수의 비교:
  - 파란색: 포트폴리오의 누적 가치 변화.
  - 녹색: KOSPI200의 누적 가치 변화.

- **Stacked Bar Chart**  
  각 분기별로 종목별 투자 비중을 시각화:
  - 각 막대는 하나의 분기를 나타냅니다.
  - 막대의 각 색상은 특정 종목의 투자 비중을 표시합니다.